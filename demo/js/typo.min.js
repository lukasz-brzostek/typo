if("undefined"==typeof jQuery)throw new Error("typo requires jQuery");!function(a){a.fn.typography=function(b){var c=a.extend({enableAll:!1,styling:!0,wordBreak:!0,nbsp:!0,spaceComma:!1,spaceDot:!1,spaceQuestion:!1,spaceExclamation:!1,spaceBracket:!1,spaceDashes:!1,oneSpace:!1,oneComma:!1,oneQuestion:!1,oneExclamation:!1,oneBracket:!1},b);if(c.enableAll)for(var d in c)c[d]=!0;if(c.wordBreak)var e="break-word;";c.wordBreak&&!c.styling&&a("body").append("<style>body {word-break: "+(null!=e?e:"normal")+"}</style>"),c.styling&&a("body").append("<style>body {-webkit-font-smoothing: subpixel-antialiased;-webkit-text-stroke: 1px transparent;-moz-osx-font-smoothing: grayscale;text-rendering: optimizeLegibility;font-kerning: normal;word-break: "+(null!=e?e:"normal")+"}</style>"),a(".typo").each(function(){var b=a(this).html(),d=b;c.oneComma&&(d=d.replace(/\,\,+/g,",")),c.oneQuestion&&(d=d.replace(/\?\?+/g,"?")),c.oneExclamation&&(d=d.replace(/\!\!+/g,"!")),c.oneBracket&&(d=d.replace(/\(\(+/g,"(").replace(/\)\)+/g,")").replace(/\[\[+/g,"[").replace(/\]\]+/g,"]").replace(/\{\{+/g,"{").replace(/\}\}+/g,"}")),c.spaceComma&&(d=d.replace(/(,\b)/g,", ").replace(/\s{1,},/g,",")),c.spaceQuestion&&(d=d.replace(/\?/g,"? ").replace(/\s{1,}\?/g,"?")),c.spaceExclamation&&(d=d.replace(/\!/g,"! ").replace(/\s{1,}\!/g,"!")),c.spaceBracket&&(d=d.replace(/\( /g,"(").replace(/\(/g," (").replace(/\)/g,") ").replace(/ \)/g,")"),d=d.replace(/\[ /g,"[").replace(/\[/g," [").replace(/\]/g,"] ").replace(/ \]/g,"]")),c.spaceDot&&(d=d.replace(/\./g,". ").replace(/\s{1,}\./g,".")),c.spaceDashes&&(d=d.replace(/-+/g," - ")),c.oneSpace&&(d=d.replace(/\s\s+/g," ")),c.nbsp&&(d=d.replace(/(\b\s\w{1,3}\s)/g,"$1&nbsp;"),d=d.replace(/(\b\s\w{1,2}\s)/g,"$1&nbsp;"),d=d.replace(/(\s\w{1,3}\s)/g,"$1&nbsp;"),d=d.replace(/(&nbsp;\w{1,3}\s)/g,"$1&nbsp;"),d=d.replace(/([,.]\w{1,3}\s)/g,"$1&nbsp;"),d=d.replace(/(\s\w{1,3}[,.])/g,"$1&nbsp;"),d=d.replace(/(\s\w{1,3}\W\s)/g,"$1&nbsp;"),d=d.replace(/(\d{1,3}[,.]\s)/g,"$1&nbsp;"),d=d.replace(/(\s{0,10}&nbsp;\s{0,10})/g,"&nbsp;"),d=d.replace(/(&nbsp;)\1+/g,"&nbsp;")),a(this).html(d)})}}(jQuery);